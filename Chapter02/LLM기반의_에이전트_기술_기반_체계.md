## 📝 Chapter 2: LLM 기반의 에이전트 기술 기반 체계
### 1. 릴리안 윙(Lilian Weng)의 자율 에이전트 구조
   OpenAI의 릴리안 윙이 제안한 LLM 기반 자율 에이전트 시스템은 에이전트를 '두뇌'로 간주하고, 이를 뒷받침하는 4가지 핵심 구성 요소로 이루어져 있습니다.

```
                               ┌───────────────┐
                               │    에이전트    │
                               └───────┬───────┘
         ┌───────────────┬─────────────┼───────────────┬───────────────┐
         │               │             │               │               │
   ┌─────▼─────┐   ┌─────▼─────┐       │         ┌─────▼─────┐   ┌─────▼─────┐
   │   기억     │   │   도구    │       │         │   계획    │   │   실행    │
   └─────┬─────┘   └─────┬─────┘       │         └─────┬─────┘   └───────────┘
         │               │             │               │
 ┌───────┴───────┐   ┌───┴────────────────────────┐    │
 │   단기 기억   │    │  Calendar()                 │   │
 ├───────────────┤   │  Calculator()               │   │
 │   장기 기억   │    │  Code Interpreter()         │   │
 └───────────────┘   │  Search()                   │   │
                     │  기타 다양한 서비스 호출     │    │
                     └────────────────────────────┘    │
                                                       │
                             ┌───────────────────────────┴───────────────────────────┐
                             │   사고의 연쇄   │   자기 성찰과 비판   │   작은 목표 분할 │
                             └────────────────────────────────────────────────────────┘

```

* **계획(Planning)**:
  * **하위 목표 분할**: 복잡한 작업을 관리 가능한 작은 단위로 쪼개는 능력.
  * **성찰과 다듬기**: 과거 행동을 비판하고 분석하여 결과의 품질을 높임.


* **기억(Memory)**:
  * **단기 기억**: 프롬프트 엔지니어링의 맥락(Context) 학습 활용.
  * **장기 기억**: 벡터 스토리지와 빠른 검색을 활용하여 정보를 장기간 저장 및 호출.


* **도구(Tool)**:
  * LLM의 고정된 지식 한계를 극복하기 위해 계산기, 코드 인터프리터, 검색 엔진 등 외부 API를 호출하여 능력을 확장.


* **실행(Action)**:
  * 계획과 기억을 바탕으로 실제로 외부 세계와 상호작용하거나 도구를 사용하여 작업을 완수.



### 2. 에이전트의 작업 처리 프로세스 (Workflow)

에이전트는 단순히 입력을 받아 출력하는 것이 아니라, 순환적인 추론 흐름을 통해 작업을 수행합니다.

1. **작업 수신**: 프롬프트, 외부 지식, 페르소나 설정을 통해 작업을 이해.
2. **기억 갱신 & 검색**: 작업에 필요한 최신 정보를 업데이트하고, 관련 데이터를 검색(Retrieval).
3. **작업 계획**: 도구와 기억을 바탕으로 구체적인 실행 계획을 수립.
4. **도구 실행**: 계획에 따라 도구를 호출. 작업 완료 신호가 나올 때까지 순환.
5. **결론 도출**: 최종 결과를 요약하고 프로세스 종료. (미완료 시 기억 검색부터 재시도)

### 3. 계획(Planning) 및 자기성찰 기술

LLM이 복잡한 문제를 해결하기 위해 사용하는 주요 추론 및 계획 기법입니다.

| 구분 | 주요 기술 | 설명 |
| --- | --- | --- |
| **작업 분해** | **CoT (Chain of Thought)** | 단계별로 사고 과정을 나열하여 큰 작업을 작은 단위로 분해. |
|  | **ToT (Tree of Thought)** | 여러 추론 경로를 트리 구조로 탐색(BFS, DFS)하며 최적의 경로 평가. |
|  | **LLM+P** | 문제를 PDDL(계획 문제 정의 언어)로 변환, 외부 계획기에 위임하여 정확성 확보. |
| **자기 성찰** | **ReAct** | '추론(Reasoning)'과 '행동(Acting)'을 결합. 환경과 상호작용하며 궤적 생성. |
|  | **Reflexion** | 과거 행동을 회고하는 동적 기억을 통해 추론 능력을 스스로 향상. |
|  | **CoH (Chain of Hindsight)** | 과거 출력에 대한 피드백을 학습하여 다음 출력을 개선하도록 유도. |

### 4. ReAct 기반 체계와 에이전트의 핵심 특성

ReAct(Reasoning + Acting)는 LLM 에이전트 개발의 사실상 표준이 되는 추론 엔진으로, **사고 → 행동 → 관찰 → 다시 사고**의 순환 고리를 형성합니다. LangChain과 같은 도구의 핵심 이념이기도 하며, 인간이 코딩하던 순서를 AI가 스스로 결정하게 만듭니다.

**ReAct 체계가 부여하는 에이전트의 4가지 특성:**

1. **적응성 (Adaptability)**: 특정 알고리즘에 얽매이지 않고 다양한 전략과 결합하여 유연하게 대처.
2. **상호작용성 (Interactivity)**: 환경의 변화를 감지하고 지속적으로 학습하며 행동을 최적화.
3. **자율성 (Autonomy)**: 상황 변화에 따라 전략을 스스로 수정하고 결정을 내림.
4. **기능성 (Functionality)**: 웹 검색, 문서 생성 등 도구 호출을 통해 실질적인 작업을 수행.

---
### 5. 기타 에이전트 인지 기반 체계

에이전트의 추론 인지 과정을 설계하는 기반 체계는 ReAct만 있는 것이 아닙니다. 아래와 같은 다른 인지 기반 체계도 존재합니다.

1. **함수 호출** : LLM이 미리 정의된 함수를 호출하는 엔진의 역할을 합니다.
2. **계획과 실행** : 일련의 행동을 전부 먼저 계획하고 나서 한꺼번에 실행하는 데 중점을 둡니다.
3. **자문자답** : LLM이 스스로 질문을 하고 답함으로써 이해를 심화하고 응답의 품질을 향상시킵니다.
4. **비판적 수정** : '비판', '수정'이라는 두 가지 핵심 단계를 바탕으로 시스템의 성능과 의사 결정 품질을 개선하기 위해 지속적으로 반복하면서 발전합니다.
   - 비판 : 의사 결정이나 행동 산출물을 평가하고 그 안에서 문제점을 찾습니다.
   - 수정 : 비판 단계에서 식별된 문제를 바탕으로 의사 결정 과정이나 행동 전략을 조정하여 산출물의 질을 향상시킵니다.
5. **사고의 연쇄** : 문제 해결 과정에서 형성되는 일련의 논리적 사고 단계를 의미합니다. 인간의 사고 과정을 모방함으로써 모델의 이해력과 추론 능력을 향상시킵니다.
6. **사고의 나무** : 사고의 연쇄를 개선한 형태로 문제 해결 과정이 일련의 논리적인 단계로 구조화됩니다.

---

## 💭 회고

이번 챕터에서는 '말 잘하는 AI'를 넘어 '일 잘하는 에이전트'가 되기 위한 기술적 아키텍처를 깊이 있게 이해할 수 있었습니다.

가장 인상 깊었던 점은 **LLM의 역할 변화**입니다. 단순히 텍스트를 생성하는 모델이 아니라, 기억(Memory)을 참조하고 도구(Tool)를 사용하여 계획(Planning)을 세우는 '오케스트레이터'로서의 정체성이 명확해졌습니다. 특히 ReAct 패턴은 에이전트가 현실 세계와 상호작용하며 오류를 수정해 나가는 과정을 논리적으로 구현했다는 점에서 매우 강력한 프레임워크라고 느꼈습니다.

앞으로의 개발 방향은 "LLM 자체의 성능"도 중요하지만, "어떤 도구를 쥐여주고, 어떻게 기억을 관리하며, 얼마나 효율적으로 계획을 짜게 할 것인가"라는 시스템 설계 역량이 핵심이 될 것임을 확신하게 되었습니다.